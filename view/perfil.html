<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meu Perfil - BiblioTech</title>
    <link rel="icon" href="../public/images/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="../public/css/main.css" />
    <link rel="stylesheet" href="../public/css/page/perfil.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <a href="home.html" class="logo heading-primary">BiblioTech</a>

      <div class="mobile-nav-toggle">
        <span class="hamburger">&#9776;</span>
      </div>

      <nav class="main-nav">
        <ul class="main-nav-list">
          <!-- Select para filtrar por g√™neros -->
          <li>
            <select id="filter-genres" class="filter-genres genero">
              <option value="">Todos os G√™neros</option>
            </select>
          </li>

          <li><input type="text" placeholder="Pesquisar Livro..." /></li>
          <li><button class="btn">Buscar</button></li>
          <li>
            <a href="generos.html" class="main-nav-link navegacao">G√™neros</a>
          </li>

          <li>
            <a href="carrinho.html" id="icart" class="main-nav-link cart-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path
                  d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                ></path>
              </svg>
            </a>
          </li>

          <!-- Bot√µes vis√≠veis apenas se o admin estiver logado -->
          <li id="btnPainelAdmin" style="display: none">
            <a href="admin.html" class="main-nav-link">Painel Admin.</a>
          </li>

          <!-- Bot√£o de perfil com dropdown -->
          <div class="dropdown">
            <button class="dropdown-toggle profile-button" id="btnPerfil">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon-profile"
              >
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </button>
            <div class="dropdown-menu">
              <a href="perfil.html" class="dropdown-item" id="btnPerfil"
                >Meu Perfil</a
              >
              <a href="biblioteca.html" class="dropdown-item" id="btnBiblioteca"
                >Biblioteca</a
              >
              <a href="#" class="dropdown-item" id="btnLogout">Logout</a>
            </div>
          </div>
        </ul>
      </nav>
    </header>

    <!-- Conte√∫do principal -->
    <main class="main-content">
      <div class="perfil-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
          <div class="user-info">
            <div class="user-avatar">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="48"
                height="48"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </div>
            <h3 class="user-name">Ol√°, Usuario123</h3>
          </div>

          <nav class="sidebar-nav">
            <h3 class="sidebar-title">Meu Perfil</h3>
            <ul class="sidebar-menu">
              <li class="menu-item active" data-section="dados-pessoais">
                Dados Pessoais
              </li>
              <li class="menu-item" data-section="historico-pedidos">
                Meus Pedidos
              </li>
              <li class="menu-item" data-section="enderecos">Meu Endere√ßo</li>
              <li class="menu-item" data-section="favoritos">
                Lista de Desejos
              </li>
              <li class="menu-item" data-section="seguranca">Seguran√ßa</li>
            </ul>
          </nav>
        </aside>

        <!-- Se√ß√£o de Dados Pessoais -->
        <div class="profile-content" id="section-dados-pessoais">
          <h2 class="heading-admin">Dados Pessoais</h2>
          <div class="profile-card">
            <form class="profile-form">
              <div class="form-group">
                <label for="nome">Nome Completo</label>
                <div class="input-with-icon">
                  <i class="icon user-icon">üë§</i>
                  <input
                    type="text"
                    id="nome"
                    name="nome"
                    value="Nome do Usu√°rio"
                  />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="email">Email</label>
                  <div class="input-with-icon">
                    <i class="icon email-icon">‚úâÔ∏è</i>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      value="usuario@email.com"
                    />
                  </div>
                </div>

                <div class="form-group">
                  <label for="telefone">Telefone</label>
                  <div class="input-with-icon">
                    <i class="icon phone-icon">üì±</i>
                    <input
                      type="tel"
                      id="telefone"
                      name="telefone"
                      value="(00) 00000-0000"
                    />
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="data_nascimento">Data de Nascimento</label>
                  <div class="input-with-icon">
                    <i class="icon calendar-icon">üóìÔ∏è</i>
                    <input
                      type="date"
                      id="data_nascimento"
                      name="data_nascimento"
                      value="1990-01-01"
                    />
                  </div>
                </div>

                <div class="form-group">
                  <label for="cpf">CPF</label>
                  <div class="input-with-icon">
                    <i class="icon document-icon">üìÑ</i>
                    <input
                      type="text"
                      id="cpf"
                      name="cpf"
                      value="000.000.000-00"
                    />
                  </div>
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-loading">
                  Salvar Altera√ß√µes
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Se√ß√£o de Pedidos -->
          <div class="profile-content hidden" id="section-historico-pedidos">
            <h2 class="heading-admin">Meus Pedidos</h2>
            <div class="profile-card">
              <!-- Lista de pedidos -->
              <div class="order-list">
                <!-- Pedidos s√£o carregados dinamicamente aqui pelo JavaScript -->
                <!-- O conte√∫do vem de public/js/pages/perfil/historico-pedidos/pedidos-service.js -->
              </div>

              <!-- Estado vazio -->
              <div class="empty-state hidden">
                <svg
                xmlns="http://www.w3.org/2000/svg"
                width="64"
                height="64"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                  <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                  <line x1="8" y1="21" x2="16" y2="21"></line>
                  <line x1="12" y1="17" x2="12" y2="21"></line>
                </svg>
                <h3>Nenhum pedido realizado</h3>
                <p>
                Seus pedidos aparecer√£o aqui quando voc√™ fizer compras em nossa
                loja.
              </p>
                <a href="home.html" class="btn">Explorar Livros</a>
              </div>
            </div>
          </div>

        <div class="profile-content hidden" id="section-enderecos">
            <h2 class="heading-admin">Meus Endere√ßos</h2>
            <div class="profile-card">
              <div class="address-header">
                <h3>Endere√ßos Cadastrados</h3>
                <button class="btn btn-primary" id="btn-novo-endereco">+ Adicionar Endere√ßo</button>
              </div>
              
              <!-- Estado vazio -->
              <div id="enderecos-vazio" class="empty-state hidden">
                <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  <polyline points="9,22 9,12 15,12 15,22"></polyline>
                </svg>
                <h3>Nenhum endere√ßo cadastrado</h3>
                <p>Adicione um endere√ßo para facilitar suas compras futuras.</p>
                <button id="btn-primeiro-endereco" class="btn">Adicionar Endere√ßo</button>
              </div>
              
              <!-- Lista de endere√ßos -->
              <div id="enderecos-lista" class="address-list">
                <!-- Endere√ßos ser√£o carregados aqui via JavaScript -->
              </div>
            </div>
            
            <!-- Formul√°rio de endere√ßo (inicialmente oculto) -->
            <div id="formulario-endereco" class="address-form-container hidden">
              <div class="form-header">
                <h3 id="form-titulo">Adicionar Novo Endere√ßo</h3>
                <button id="btn-cancelar-endereco" class="btn-cancel" type="button">‚úï</button>
              </div>
              
              <form id="endereco-form">
                <input type="hidden" id="endereco-id" />
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="endereco">Endere√ßo *</label>
                    <input
                      type="text"
                      id="endereco"
                      name="endereco"
                      placeholder="Rua, Avenida, etc."
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="numero">N√∫mero *</label>
                    <input
                      type="text"
                      id="numero"
                      name="numero"
                      placeholder="123"
                      required
                    />
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="complemento">Complemento</label>
                  <input
                    type="text"
                    id="complemento"
                    name="complemento"
                    placeholder="Apto, Bloco, etc. (opcional)"
                  />
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="bairro">Bairro *</label>
                    <input
                      type="text"
                      id="bairro"
                      name="bairro"
                      placeholder="Nome do bairro"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="cidade">Cidade *</label>
                    <input
                      type="text"
                      id="cidade"
                      name="cidade"
                      placeholder="Nome da cidade"
                      required
                    />
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="estado">Estado *</label>
                    <input
                      type="text"
                      id="estado"
                      name="estado"
                      maxlength="2"
                      placeholder="SP"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="cep">CEP</label>
                    <input
                      type="text"
                      id="cep"
                      name="cep"
                      maxlength="9"
                      placeholder="00000-000"
                    />
                  </div>
                </div>

                <div class="form-checkbox">
                  <input type="checkbox" id="is_principal" name="is_principal" />
                  <label for="is_principal">Definir como endere√ßo principal</label>
                </div>

                <div class="form-actions">
                  <button type="button" id="btn-cancelar-form" class="btn btn-secondary">
                    Cancelar
                  </button>
                  <button type="submit" id="btn-salvar-endereco" class="btn btn-primary btn-loading">
                    Salvar Endere√ßo
                  </button>
                </div>
              </form>
            </div>
          </div>
        <!-- Se√ß√£o de Lista de Desejos -->
        <div class="profile-content hidden" id="section-favoritos">
          <h2 class="heading-admin">Lista de Desejos</h2>
          <div class="profile-card">
            <!-- Lista de livros da wishlist (JS insere aqui) -->
            <div class="wishlist-list"></div>

            <!-- Estado vazio (vis√≠vel s√≥ se lista estiver vazia) -->
            <div class="empty-state hidden">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="64"
                height="64"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"
                ></path>
              </svg>
              <h3>Sua lista de desejos est√° vazia</h3>
              <p>
                Adicione livros √† sua lista para encontr√°-los facilmente mais
                tarde.
              </p>
              <a href="home.html" class="btn">Explorar Livros</a>
            </div>
          </div>
        </div>

        <!-- Se√ß√£o de Seguran√ßa -->
        <div class="profile-content hidden" id="section-seguranca">
          <h2 class="heading-admin">Seguran√ßa</h2>
          <div class="profile-card">
            <form class="security-form">
              <div class="form-group">
                <label for="senha_atual">Senha Atual</label>
                <div class="input-with-icon">
                  <i class="icon lock-icon">üîí</i>
                  <input
                    type="password"
                    id="senha_atual"
                    name="senha_atual"
                    placeholder="Digite sua senha atual"
                    minlength="6"
                    maxlength="24"
                    required
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="nova_senha">Nova Senha</label>
                <div class="input-with-icon">
                  <i class="icon lock-icon">üîí</i>
                  <input
                    type="password"
                    id="nova_senha"
                    name="nova_senha"
                    placeholder="Digite sua nova senha"
                    minlength="6"
                    maxlength="24"
                    required
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="confirmar_senha">Confirmar Nova Senha</label>
                <div class="input-with-icon">
                  <i class="icon lock-icon">üîí</i>
                  <input
                    type="password"
                    id="confirmar_senha"
                    name="confirmar_senha"
                    placeholder="Confirme sua nova senha"
                    minlength="6"
                    maxlength="24"
                    required
                  />
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" class="btn btn-primary btn-loading">
                  Alterar Senha
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Rodap√© -->
    <footer>¬© 2025 - Todos os direitos reservados.</footer>

    <div id="cadastroModal" class="modal">
      <div class="modal-content">
        <div class="modal-icon"></div>
        <h2 class="modal-title" id="modal-title"></h2>
        <p class="modal-message" id="modal-message"></p>
        <button class="modal-close" id="modal-close"></button>
      </div>
    </div>

    <!-- Scripts -->
    <script src="../public/js/navigation.js"></script>
    <script type="module" src="../public/js/status.js"></script>
    <script type="module" src="../public/js/profile-menu.js"></script>
    <script
      type="module"
      src="../public/js/utils/search-redirector.js"
    ></script>
    <script type="module" src="../public/js/pages/perfil/main.js"></script>
    <script type="module" src="../public/js/pages/carrinho.js"></script>
    <script type="module" src="../public/js/pages/genero.js"></script>

  </body>
</html>
