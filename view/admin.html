<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel Admin</title>
    <link rel="icon" href="../public/images/favicon.png" type="image/x-icon" />
    <link rel="stylesheet" href="../public/css/main.css" />
    <link rel="stylesheet" href="../public/css/page/admin.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <a href="home.html" class="logo heading-primary">BiblioTech</a>

      <div class="mobile-nav-toggle">
        <span class="hamburger">&#9776;</span>
      </div>

      <nav class="main-nav">
        <ul class="main-nav-list">
          <li><a href="home.html" class="main-nav-link navegacao">Home</a></li>
          <li>
            <a href="generos.html" class="main-nav-link navegacao">G√™neros</a>
          </li>

          <li>
            <a href="carrinho.html" id="icart" class="main-nav-link cart-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path
                  d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
                ></path>
              </svg>
            </a>
          </li>

          <div class="dropdown">
            <button class="dropdown-toggle profile-button" id="btnPerfil">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon-profile"
              >
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </button>
            <div class="dropdown-menu">
              <a href="perfil.html" class="dropdown-item" id="btnPerfil"
                >Meu Perfil</a
              >
              <a href="biblioteca.html" class="dropdown-item" id="btnBiblioteca"
                >Biblioteca</a
              >
              <a href="#" class="dropdown-item" id="btnLogout">Logout</a>
            </div>
          </div>

          <!-- Bot√µes vis√≠veis quando o admin N√ÉO estiver logado -->
          <li id="btnLogin">
            <a href="login.html" class="main-nav-link nav-cta login">Login</a>
          </li>
          <li id="btnCadastro">
            <a href="#" class="main-nav-link nav-cta cadastro">Cadastro</a>
          </li>
        </ul>
      </nav>
    </header>

    <!-- Conte√∫do principal -->
    <main class="main-content">
      <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
          <h3 class="sidebar-title">Painel Administrativo</h3>
          <nav class="sidebar-nav">
            <ul class="sidebar-menu">
              <li class="menu-item active" data-section="livros">
                Gerenciar Livros
              </li>
              <li class="menu-item" data-section="generos">
                G√™neros/categorias
              </li>
              <li class="menu-item" data-section="editoras">Editoras</li>
            </ul>
          </nav>
        </aside>

        <!-- Se√ß√£o de Livros -->
        <div class="admin-content" id="section-livros">
          <div class="admin-header">
            <h2 class="heading-admin">Gerenciamento de Livros</h2>
            <button class="btn-add-livro" id="btnCadastrarLivro">
              Adicionar Livro
            </button>
          </div>

          <table class="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>T√≠tulo</th>
                <th>Autor</th>
                <th>G√™nero</th>
                <th>Pre√ßo</th>
                <th>Capa</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <!-- Se√ß√£o de Editoras -->
        <div class="admin-content hidden" id="section-editoras">
          <div class="admin-header">
            <h2 class="heading-admin">Gerenciamento de Editoras</h2>
            <button class="btn-add" id="btnAdicionarEditora">
              Adicionar Editora
            </button>
          </div>

          <table class="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Data de Cria√ß√£o</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="tabela-editoras"></tbody>
          </table>
        </div>

        <div class="admin-content hidden" id="section-generos">
          <div class="admin-header">
            <h2 class="heading-admin">Gerenciamento de G√™neros</h2>
            <button class="btn-add" id="btnAdicionarGenero">
              Adicionar G√™nero
            </button>
          </div>

          <table class="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nome</th>
                <th>Data de Cria√ß√£o</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="tabela-generos">
              <!-- G√™neros ser√£o carregados aqui via JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>  
    </main>

    <!-- Rodap√© -->
    <footer>¬© 2025 - Todos os direitos reservados.</footer>
    <div class="modal hidden" id="modalCadastroLivro">
      <div class="modal-content">
        <h2>Cadastro de Livros</h2>
        <span class="close-btn">&times;</span>

        <form class="form-livro">
          <div class="form-group">
            <label for="titulo">T√≠tulo do Livro</label>
            <div class="input-with-icon">
              <i class="icon book-icon">üìö</i>
              <input
                type="text"
                id="titulo"
                name="titulo"
                placeholder="Digite o t√≠tulo do livro"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="autor">Autor</label>
            <div class="input-with-icon">
              <i class="icon author-icon">üë§</i>
              <input
                type="text"
                id="autor"
                name="autor"
                placeholder="Digite o autor do livro"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="genero">G√™nero</label>
              <div class="input-with-icon">
                <i class="icon genre-icon">üõ°Ô∏è</i>
                <select id="genero" name="genero_id" class="genero">
                  <option value="" selected disabled>Selecione o g√™nero</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="preco">Pre√ßo</label>
              <div class="input-with-icon">
                <i class="icon price-icon">üí∞</i>
                <input
                  type="text"
                  id="preco"
                  name="preco"
                  placeholder="Digite o pre√ßo do livro"
                />
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="editora">Editora</label>
            <div class="input-with-icon">
              <i class="icon publisher-icon">üè¢</i>
              <select id="editora" name="editora_id">
                <option value="" selected disabled>Selecione a editora</option>
                <!-- Editoras ser√£o carregadas dinamicamente via JavaScript -->
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="descricao">Descri√ß√£o</label>
            <div class="input-with-icon">
              <i class="icon description-icon">üìù</i>
              <textarea
                id="descricao"
                name="descricao"
                rows="4"
                placeholder="Digite a descri√ß√£o do livro"
              ></textarea>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="imagem">Imagem da capa</label>
              <div class="input-with-icon">
                <i class="icon image-icon">üñºÔ∏è</i>
                <div class="file-input">
                  <input
                    type="text"
                    id="imagem_url"
                    name="imagem_url"
                    placeholder="Cole a URL da imagem aqui"
                  />
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="pdf">Livro PDF (para ebook)</label>
              <div class="input-with-icon">
                <i class="icon pdf-icon">üìÑ</i>
                <div class="file-input">
                  <input type="text" id="pdf_url" 
                  name="pdf_url" 
                  placeholder="Cole a URL do pdf aqui" />
                  
                </div>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="btn limpar">LIMPAR CAMPOS</button>
            <button type="submit" class="btn salvar btn-loading" id="btnSalvarLivro">
              SALVAR
            </button>
          </div>
        </form>
      </div>
    </div>
    <div class="modal-sucesso hidden" id="modalSucesso">
      <div class="modal-sucesso-content">
        <div class="check-icon">‚úÖ</div>
        <p>Livro salvo com sucesso!</p>
      </div>
    </div>

    <div id="modalConfirmarExclusao" class="modal hidden">
      <div class="modal-content">
        <h2>Confirmar Exclus√£o</h2>
        <p>Tem certeza que deseja excluir este livro?</p>
        <div
          class="form-actions"
          style="justify-content: center; margin-top: 2rem"
        >
          <button id="btnConfirmarExclusao" class="btn excluir btn-loading">
            Sim, excluir
          </button>
          <button id="btnCancelarExclusao" class="btn limpar">Cancelar</button>
        </div>
      </div>
    </div>

    <div id="modalSucessoExclusao" class="modal-sucesso hidden">
      <div class="modal-sucesso-content">
        <div class="check-icon">‚úîÔ∏è</div>
        <p>Livro exclu√≠do com sucesso!</p>
      </div>
    </div>

    <!-- Modal de Cadastro/Edi√ß√£o de Editora -->
    <div class="modal hidden" id="modalEditora">
      <div class="modal-content">
        <h2 id="modal-editora-titulo">Adicionar Editora</h2>
        <span class="close-btn">&times;</span>

        <form class="form-editora">
          <input type="hidden" id="editora-id" />

          <div class="form-group">
            <label for="editora-nome">Nome da Editora</label>
            <div class="input-with-icon">
              <i class="icon publisher-icon">üè¢</i>
              <input
                type="text"
                id="editora-nome"
                placeholder="Digite o nome da editora"
              />
            </div>
          </div>

          <div class="form-buttons">
            <button type="button" class="btn-cancel">Cancelar</button>
            <button type="submit" class="btn-save btn-loading">Salvar</button>
          </div>
        </form>
      </div>
    </div>

     <div class="modal hidden" id="modalGenero">
      <div class="modal-content">
        <h2 id="modal-genero-titulo">Adicionar G√™nero</h2>
        <span class="close-btn" data-modal-id="modalGenero">&times;</span>

        <form class="form-genero">
          <input type="hidden" id="genero-id-input" />

          <div class="form-group">
            <label for="genero-nome-input">Nome do G√™nero</label> 
            <div class="input-with-icon">
              <i class="icon genre-icon">üõ°Ô∏è</i>
              <input
                type="text"
                id="genero-nome-input"
                placeholder="Digite o nome do g√™nero"
              />
            </div>
          </div>

          <div class="form-buttons">
            <button type="button" class="btn-cancel" data-modal-id="modalGenero">Cancelar</button>
            <button type="submit" class="btn-save btn-loading">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="../public/js/admin.bundle.js"></script>
    <script type="module" src="../public/js/pages/livro.js"></script>
    <script type="module" src="../public/js/pages/genero.js"></script>
    <script type="module" src="../public/js/pages/editora.js"></script>
    <script type="module" src="../public/js/pages/generoManager.js"></script>
  </body>
</html>
